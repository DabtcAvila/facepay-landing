/* ==========================================================================
   FORMS SYSTEM - FACEPAY LANDING
   Stripe/Linear inspired form components
   ========================================================================== */

/* ==========================================================================
   BASE FORM STYLES
   ========================================================================== */

.form {
  display: flex;
  flex-direction: column;
  gap: var(--space-6);
  font-family: var(--font-sans);
}

.form-section {
  display: flex;
  flex-direction: column;
  gap: var(--space-4);
}

.form-row {
  display: flex;
  gap: var(--space-4);
  
  @media (max-width: 768px) {
    flex-direction: column;
  }
}

.form-group {
  display: flex;
  flex-direction: column;
  gap: var(--space-2);
  flex: 1;
}

/* ==========================================================================
   LABELS
   ========================================================================== */

.label {
  font-size: var(--text-sm);
  font-weight: var(--font-medium);
  color: var(--color-foreground);
  line-height: var(--leading-tight);
}

.label-required::after {
  content: ' *';
  color: var(--color-error-500);
}

.label-optional::after {
  content: ' (optional)';
  color: var(--color-foreground-muted);
  font-weight: var(--font-normal);
}

/* ==========================================================================
   INPUT BASE STYLES
   ========================================================================== */

.input {
  /* Structure */
  display: flex;
  align-items: center;
  position: relative;
  
  /* Appearance */
  background-color: var(--color-background);
  border: 1px solid var(--color-border);
  border-radius: var(--radius-md);
  
  /* Typography */
  font-family: var(--font-sans);
  font-size: var(--text-base);
  color: var(--color-foreground);
  
  /* Interaction */
  transition: var(--transition-all);
  
  /* Focus state */
  &:focus-within {
    border-color: var(--color-primary-500);
    box-shadow: 0 0 0 3px var(--color-primary-100);
    outline: none;
  }
  
  /* Disabled state */
  &:disabled,
  &[aria-disabled="true"] {
    background-color: var(--color-background-muted);
    color: var(--color-foreground-muted);
    cursor: not-allowed;
    
    input,
    textarea,
    select {
      cursor: not-allowed;
    }
  }
}

/* Input field element */
.input input,
.input textarea,
.input select {
  width: 100%;
  border: none;
  outline: none;
  background: transparent;
  color: inherit;
  font: inherit;
  
  &::placeholder {
    color: var(--color-foreground-subtle);
  }
  
  &:disabled {
    cursor: not-allowed;
  }
}

/* ==========================================================================
   INPUT SIZES
   ========================================================================== */

.input-sm {
  padding: var(--space-2) var(--space-3);
  font-size: var(--text-sm);
  min-height: 36px;
}

.input-md {
  padding: var(--space-3) var(--space-4);
  font-size: var(--text-base);
  min-height: 44px;
}

.input-lg {
  padding: var(--space-4) var(--space-5);
  font-size: var(--text-lg);
  min-height: 52px;
}

/* ==========================================================================
   INPUT STATES
   ========================================================================== */

.input-success {
  border-color: var(--color-success-500);
  
  &:focus-within {
    border-color: var(--color-success-600);
    box-shadow: 0 0 0 3px var(--color-success-100);
  }
}

.input-warning {
  border-color: var(--color-warning-500);
  
  &:focus-within {
    border-color: var(--color-warning-600);
    box-shadow: 0 0 0 3px var(--color-warning-100);
  }
}

.input-error {
  border-color: var(--color-error-500);
  
  &:focus-within {
    border-color: var(--color-error-600);
    box-shadow: 0 0 0 3px var(--color-error-100);
  }
}

/* ==========================================================================
   INPUT VARIATIONS
   ========================================================================== */

/* Textarea */
.textarea {
  .input {
    align-items: stretch;
    min-height: 100px;
    
    textarea {
      resize: vertical;
      min-height: 100px;
    }
  }
  
  &.textarea-sm .input {
    min-height: 80px;
    
    textarea {
      min-height: 80px;
    }
  }
  
  &.textarea-lg .input {
    min-height: 120px;
    
    textarea {
      min-height: 120px;
    }
  }
}

/* Select */
.select {
  position: relative;
  
  .input {
    cursor: pointer;
    
    select {
      cursor: pointer;
      appearance: none;
      padding-right: var(--space-10);
    }
    
    &::after {
      content: '';
      position: absolute;
      right: var(--space-4);
      top: 50%;
      transform: translateY(-50%);
      width: 0;
      height: 0;
      border-left: 4px solid transparent;
      border-right: 4px solid transparent;
      border-top: 4px solid var(--color-foreground-muted);
      pointer-events: none;
    }
  }
  
  &:focus-within .input::after {
    border-top-color: var(--color-primary-500);
  }
}

/* Input with icon */
.input-with-icon {
  .input {
    padding-left: var(--space-10);
  }
  
  .input-icon {
    position: absolute;
    left: var(--space-3);
    top: 50%;
    transform: translateY(-50%);
    color: var(--color-foreground-muted);
    pointer-events: none;
    z-index: 1;
  }
  
  &.input-sm .input {
    padding-left: var(--space-8);
  }
  
  &.input-sm .input-icon {
    left: var(--space-2);
  }
  
  &.input-lg .input {
    padding-left: var(--space-12);
  }
  
  &.input-lg .input-icon {
    left: var(--space-4);
  }
}

/* Input with action */
.input-with-action {
  .input {
    padding-right: var(--space-2);
  }
  
  .input-action {
    display: flex;
    align-items: center;
    gap: var(--space-2);
    margin-left: auto;
    flex-shrink: 0;
  }
}

/* ==========================================================================
   CHECKBOX & RADIO STYLES
   ========================================================================== */

.checkbox,
.radio {
  display: flex;
  align-items: flex-start;
  gap: var(--space-3);
  cursor: pointer;
  
  input {
    margin: 0;
    width: 18px;
    height: 18px;
    border: 1px solid var(--color-border-strong);
    background-color: var(--color-background);
    cursor: pointer;
    transition: var(--transition-all);
    
    &:checked {
      background-color: var(--color-primary-600);
      border-color: var(--color-primary-600);
      color: white;
    }
    
    &:focus {
      outline: none;
      box-shadow: 0 0 0 3px var(--color-primary-100);
    }
    
    &:disabled {
      opacity: 0.5;
      cursor: not-allowed;
    }
  }
  
  .checkbox-label,
  .radio-label {
    font-size: var(--text-base);
    color: var(--color-foreground);
    line-height: var(--leading-relaxed);
    cursor: pointer;
    
    a {
      color: var(--color-primary-600);
      text-decoration: underline;
      text-underline-offset: 2px;
      
      &:hover {
        color: var(--color-primary-700);
      }
    }
  }
  
  &:has(input:disabled) {
    cursor: not-allowed;
    
    .checkbox-label,
    .radio-label {
      color: var(--color-foreground-muted);
      cursor: not-allowed;
    }
  }
}

.checkbox input {
  border-radius: var(--radius-sm);
  
  &:checked::after {
    content: 'âœ“';
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 12px;
    font-weight: bold;
  }
}

.radio input {
  border-radius: var(--radius-full);
  
  &:checked::after {
    content: '';
    display: block;
    width: 8px;
    height: 8px;
    background-color: currentColor;
    border-radius: var(--radius-full);
    margin: 4px;
  }
}

/* ==========================================================================
   SWITCH STYLES
   ========================================================================== */

.switch {
  display: flex;
  align-items: center;
  gap: var(--space-3);
  cursor: pointer;
  
  .switch-input {
    position: relative;
    width: 44px;
    height: 24px;
    margin: 0;
    appearance: none;
    background-color: var(--color-neutral-300);
    border: none;
    border-radius: var(--radius-full);
    cursor: pointer;
    transition: var(--transition-all);
    
    &::after {
      content: '';
      position: absolute;
      top: 2px;
      left: 2px;
      width: 20px;
      height: 20px;
      background-color: white;
      border-radius: var(--radius-full);
      transition: var(--transition-all);
      box-shadow: var(--shadow-sm);
    }
    
    &:checked {
      background-color: var(--color-primary-600);
      
      &::after {
        transform: translateX(20px);
      }
    }
    
    &:focus {
      outline: none;
      box-shadow: 0 0 0 3px var(--color-primary-100);
    }
    
    &:disabled {
      opacity: 0.5;
      cursor: not-allowed;
    }
  }
  
  .switch-label {
    font-size: var(--text-base);
    color: var(--color-foreground);
    cursor: pointer;
  }
  
  &:has(.switch-input:disabled) {
    cursor: not-allowed;
    
    .switch-label {
      color: var(--color-foreground-muted);
      cursor: not-allowed;
    }
  }
}

/* ==========================================================================
   FIELD MESSAGES
   ========================================================================== */

.field-message {
  font-size: var(--text-sm);
  line-height: var(--leading-tight);
  display: flex;
  align-items: center;
  gap: var(--space-2);
}

.field-message-help {
  color: var(--color-foreground-muted);
}

.field-message-success {
  color: var(--color-success-600);
}

.field-message-warning {
  color: var(--color-warning-600);
}

.field-message-error {
  color: var(--color-error-600);
}

/* ==========================================================================
   FORM ACTIONS
   ========================================================================== */

.form-actions {
  display: flex;
  gap: var(--space-4);
  justify-content: flex-end;
  padding-top: var(--space-6);
  border-top: 1px solid var(--color-border);
  
  &.form-actions-full {
    justify-content: stretch;
    
    .btn {
      flex: 1;
    }
  }
  
  &.form-actions-center {
    justify-content: center;
  }
  
  &.form-actions-start {
    justify-content: flex-start;
  }
  
  @media (max-width: 768px) {
    flex-direction: column;
    
    &.form-actions-mobile-stack .btn {
      width: 100%;
    }
  }
}

/* ==========================================================================
   FIELDSET STYLES
   ========================================================================== */

.fieldset {
  border: 1px solid var(--color-border);
  border-radius: var(--radius-lg);
  padding: var(--space-6);
  margin: 0;
  
  .fieldset-legend {
    font-weight: var(--font-semibold);
    color: var(--color-foreground);
    padding: 0 var(--space-3);
    background-color: var(--color-background);
  }
  
  .fieldset-description {
    font-size: var(--text-sm);
    color: var(--color-foreground-muted);
    margin-bottom: var(--space-4);
  }
}

/* ==========================================================================
   SEARCH INPUT
   ========================================================================== */

.search-input {
  .input {
    padding-left: var(--space-10);
    padding-right: var(--space-10);
  }
  
  .search-icon {
    position: absolute;
    left: var(--space-3);
    top: 50%;
    transform: translateY(-50%);
    color: var(--color-foreground-muted);
    pointer-events: none;
  }
  
  .search-clear {
    position: absolute;
    right: var(--space-3);
    top: 50%;
    transform: translateY(-50%);
    background: none;
    border: none;
    color: var(--color-foreground-muted);
    cursor: pointer;
    padding: var(--space-1);
    border-radius: var(--radius-sm);
    transition: var(--transition-colors);
    
    &:hover {
      color: var(--color-foreground);
      background-color: var(--color-background-muted);
    }
    
    &:focus {
      outline: none;
      box-shadow: 0 0 0 2px var(--color-primary-500);
    }
  }
}

/* ==========================================================================
   FILE UPLOAD
   ========================================================================== */

.file-upload {
  .file-input {
    position: absolute;
    opacity: 0;
    width: 0;
    height: 0;
    overflow: hidden;
  }
  
  .file-trigger {
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    gap: var(--space-4);
    padding: var(--space-8);
    border: 2px dashed var(--color-border);
    border-radius: var(--radius-lg);
    background-color: var(--color-background-subtle);
    cursor: pointer;
    transition: var(--transition-all);
    
    &:hover {
      border-color: var(--color-primary-500);
      background-color: var(--color-primary-50);
    }
    
    &:focus-within {
      border-color: var(--color-primary-500);
      box-shadow: 0 0 0 3px var(--color-primary-100);
    }
  }
  
  .file-icon {
    width: 48px;
    height: 48px;
    color: var(--color-foreground-muted);
  }
  
  .file-text {
    text-align: center;
    
    .file-primary {
      font-weight: var(--font-medium);
      color: var(--color-foreground);
      margin-bottom: var(--space-1);
    }
    
    .file-secondary {
      font-size: var(--text-sm);
      color: var(--color-foreground-muted);
    }
  }
  
  &.has-files .file-trigger {
    border-style: solid;
    border-color: var(--color-success-500);
    background-color: var(--color-success-50);
  }
  
  &.is-error .file-trigger {
    border-color: var(--color-error-500);
    background-color: var(--color-error-50);
  }
}

/* ==========================================================================
   RESPONSIVE DESIGN
   ========================================================================== */

@media (max-width: 768px) {
  .form {
    gap: var(--space-4);
  }
  
  .form-row {
    flex-direction: column;
  }
  
  .form-actions {
    flex-direction: column;
    
    .btn {
      width: 100%;
    }
  }
}

/* ==========================================================================
   ACCESSIBILITY ENHANCEMENTS
   ========================================================================== */

@media (prefers-reduced-motion: reduce) {
  .input,
  .checkbox input,
  .radio input,
  .switch-input {
    transition: none;
  }
}

@media (prefers-contrast: high) {
  .input {
    border-width: 2px;
  }
  
  .checkbox input,
  .radio input {
    border-width: 2px;
  }
}

/* ==========================================================================
   FORM VALIDATION STYLES
   ========================================================================== */

.form-group:has(.input-error) .label {
  color: var(--color-error-600);
}

.form-group:has(.input-success) .label {
  color: var(--color-success-600);
}

.form-group:has(.input-warning) .label {
  color: var(--color-warning-600);
}